{
  "name": "code-to-txt-exporter-mg",
  "displayName": "Code Dump to TXT/MD",
  "description": "Export all code in a folder to a single .txt or .md file. Useful for archiving or AI-based code analysis.",
  "publisher": "mghiani",
  "license": "MIT",
  "version": "1.4.7",
  "icon": "logo.png",
  "engines": {
    "vscode": "^1.102.0"
  },
  "repository": {
    "type": "git",
    "url": "https://github.com/m-ghiani/code-exporter.git"
  },
  "activationEvents": [
    "onCommand:extension.exportCodeToText"
  ],
  "main": "./dist/extension.js",
  "contributes": {
    "commands": [
      {
        "command": "extension.exportCodeToText",
        "title": "Export Code to TXT/MD",
        "icon": "$(export)"
      },
      {
        "command": "extension.exportCodeCLI",
        "title": "Code Dump: Export Current Workspace"
      }
    ],
    "keybindings": [
      {
        "command": "extension.exportCodeToText",
        "key": "ctrl+shift+e",
        "mac": "cmd+shift+e",
        "when": "explorerViewletFocus"
      }
    ],
    "menus": {
      "explorer/context": [
        {
          "command": "extension.exportCodeToText",
          "when": "explorerResourceIsFolder",
          "group": "2_workspace"
        }
      ],
      "commandPalette": [
        {
          "command": "extension.exportCodeCLI",
          "when": "workspaceFolderCount > 0"
        }
      ]
    },
    "configuration": {
      "title": "Code Dump",
      "properties": {
        "codeDump.defaultExtensions": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "default": [
            ".ts",
            ".js",
            ".py"
          ],
          "description": "Default list of file extensions to include when exporting code."
        },
        "codeDump.outputFormat": {
          "type": "string",
          "enum": [
            ".txt",
            ".md",
            ".json",
            ".pdf"
          ],
          "default": ".md",
          "description": "Default output format for the exported file (.txt, .md, .json for structured output, or .pdf)."
        },
        "codeDump.openAfterExport": {
          "type": "boolean",
          "default": true,
          "description": "Open exported file automatically after creation."
        },
        "codeDump.copyToClipboard": {
          "type": "boolean",
          "default": false,
          "description": "Copy exported content to clipboard."
        },
        "codeDump.showNotifications": {
          "type": "boolean",
          "default": false,
          "description": "Show VS Code notifications for export status and errors."
        },
        "codeDump.logVerbose": {
          "type": "boolean",
          "default": false,
          "description": "Log every operation to the export webview log."
        },
        "codeDump.compactMode": {
          "type": "boolean",
          "default": false,
          "description": "Enable compact mode (strip extra whitespace)."
        },
        "codeDump.dryRun": {
          "type": "boolean",
          "default": false,
          "description": "Simulate the export without creating files."
        },
        "codeDump.skipEmptyFiles": {
          "type": "string",
          "enum": [
            "include",
            "exclude",
            "ask"
          ],
          "default": "ask",
          "description": "How to handle empty files during export: 'include', 'exclude', or 'ask'."
        },
        "codeDump.useSmartFilters": {
          "type": "boolean",
          "default": true,
          "description": "Enable smart filtering to automatically exclude common build/cache directories."
        },
        "codeDump.useCodedumpIgnore": {
          "type": "boolean",
          "default": true,
          "description": "Use .codedumpignore file for project-specific export exclusions (similar to .gitignore syntax)."
        },
        "codeDump.enablePresets": {
          "type": "boolean",
          "default": true,
          "description": "Enable automatic project type detection and presets."
        },
        "codeDump.includeMetadata": {
          "type": "boolean",
          "default": false,
          "description": "Include file metadata (size, lines, modification date) in export."
        },
        "codeDump.showTokenEstimate": {
          "type": "boolean",
          "default": true,
          "description": "Show estimated token count for AI model usage."
        },
        "codeDump.smartFilters": {
          "type": "object",
          "default": {
            "autoExclude": [
              "node_modules",
              "dist",
              "build",
              ".git",
              "coverage",
              ".vscode",
              ".idea"
            ],
            "maxFileSize": "1MB",
            "skipBinaryFiles": true,
            "includePatterns": [],
            "excludePatterns": [
              "*.log",
              "*.tmp",
              "*.cache"
            ]
          },
          "description": "Smart filtering configuration for automatic file exclusion.",
          "properties": {
            "autoExclude": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "Directory names to automatically exclude."
            },
            "maxFileSize": {
              "type": "string",
              "description": "Maximum file size (e.g., '1MB', '500KB')."
            },
            "skipBinaryFiles": {
              "type": "boolean",
              "description": "Automatically skip binary files."
            },
            "includePatterns": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "File patterns that must be included (if specified, only these files will be included)."
            },
            "excludePatterns": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "File patterns to exclude (supports wildcards)."
            }
          }
        },
        "codeDump.maxChunkSize": {
          "type": "number",
          "default": 500000,
          "description": "Maximum size per output file chunk in bytes (500KB default)."
        },
        "codeDump.excludeSensitiveFiles": {
          "type": "boolean",
          "default": true,
          "description": "Automatically exclude files that may contain sensitive data (.env, *.pem, credentials.*, etc.)."
        },
        "codeDump.sensitivePatterns": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "default": [
            ".env",
            ".env.*",
            "*.pem",
            "*.key",
            "*.p12",
            "*.pfx",
            "*.crt",
            "*.cer",
            "credentials.*",
            "*secret*",
            "*.secrets",
            ".npmrc",
            ".pypirc",
            "*.keystore",
            "id_rsa*",
            "id_dsa*",
            "id_ecdsa*",
            "id_ed25519*",
            "*.gpg",
            "serviceAccountKey.json",
            "firebase-adminsdk*.json"
          ],
          "description": "File patterns to exclude as sensitive (supports wildcards)."
        },
        "codeDump.rememberLastChoice": {
          "type": "boolean",
          "default": true,
          "description": "Remember last export selections (extensions, template, format) and use them as defaults."
        },
        "codeDump.showPreview": {
          "type": "string",
          "enum": [
            "always",
            "never",
            "ask"
          ],
          "default": "ask",
          "description": "Show a preview of files before export: 'always', 'never', or 'ask'."
        },
        "codeDump.aiContextOptimizer": {
          "type": "object",
          "default": {
            "enabled": false,
            "maxTokenBudget": 100000,
            "removeComments": true,
            "removeDocstrings": true,
            "minifyWhitespace": true,
            "truncateLargeFiles": true,
            "maxLinesPerFile": 500,
            "prioritizeRecentFiles": true
          },
          "description": "AI Context Optimizer settings for reducing token usage.",
          "properties": {
            "enabled": {
              "type": "boolean",
              "description": "Enable AI context optimization to reduce token count."
            },
            "maxTokenBudget": {
              "type": "number",
              "description": "Maximum total tokens for the export (approximate)."
            },
            "removeComments": {
              "type": "boolean",
              "description": "Remove single-line and multi-line comments."
            },
            "removeDocstrings": {
              "type": "boolean",
              "description": "Remove docstrings and documentation comments."
            },
            "minifyWhitespace": {
              "type": "boolean",
              "description": "Reduce excessive blank lines and trailing whitespace."
            },
            "truncateLargeFiles": {
              "type": "boolean",
              "description": "Truncate files that exceed maxLinesPerFile."
            },
            "maxLinesPerFile": {
              "type": "number",
              "description": "Maximum lines per file before truncation."
            },
            "prioritizeRecentFiles": {
              "type": "boolean",
              "description": "Prioritize recently modified files when budget is limited."
            }
          }
        },
        "codeDump.privacyMode": {
          "type": "object",
          "default": {
            "enabled": false,
            "maskEmails": true,
            "maskTokens": true,
            "maskApiKeys": true,
            "placeholder": "[REDACTED]",
            "customPatterns": []
          },
          "description": "Privacy mode settings for masking sensitive data during export.",
          "properties": {
            "enabled": {
              "type": "boolean",
              "description": "Enable privacy mode masking during export."
            },
            "maskEmails": {
              "type": "boolean",
              "description": "Mask email addresses."
            },
            "maskTokens": {
              "type": "boolean",
              "description": "Mask tokens (JWT, bearer, common token prefixes)."
            },
            "maskApiKeys": {
              "type": "boolean",
              "description": "Mask API keys and secrets in key/value assignments."
            },
            "placeholder": {
              "type": "string",
              "description": "Placeholder used for masked values."
            },
            "customPatterns": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "Custom regex patterns to mask."
            }
          }
        },
        "codeDump.userProfiles": {
          "type": "array",
          "default": [],
          "description": "User profiles for personalized export presets.",
          "items": {
            "type": "object",
            "properties": {
              "id": {
                "type": "string",
                "description": "Unique profile id."
              },
              "name": {
                "type": "string",
                "description": "Profile display name."
              },
              "extensions": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              },
              "template": {
                "type": "string"
              },
              "outputFormat": {
                "type": "string",
                "enum": [
                  ".txt",
                  ".md",
                  ".json"
                ]
              },
              "skipEmpty": {
                "type": "boolean"
              },
              "showPreview": {
                "type": "boolean"
              },
              "exportPreset": {
                "type": "string",
                "enum": [
                  "standard",
                  "ai-pack"
                ]
              },
              "privacyModeEnabled": {
                "type": "boolean"
              }
            },
            "required": [
              "id",
              "name"
            ]
          }
        },
        "codeDump.notebooklmEnterprise": {
          "type": "object",
          "default": {
            "enabled": false,
            "projectNumber": "",
            "location": "global",
            "endpointLocation": "us-",
            "notebookId": "",
            "accessToken": ""
          },
          "description": "NotebookLM Enterprise upload settings (requires Enterprise access token).",
          "properties": {
            "enabled": {
              "type": "boolean",
              "description": "Enable NotebookLM Enterprise uploads."
            },
            "projectNumber": {
              "type": "string",
              "description": "Google Cloud project number."
            },
            "location": {
              "type": "string",
              "description": "NotebookLM location (e.g. global, us, eu)."
            },
            "endpointLocation": {
              "type": "string",
              "description": "Endpoint location prefix (e.g. us-, eu-, global-)."
            },
            "notebookId": {
              "type": "string",
              "description": "NotebookLM notebook ID."
            },
            "accessToken": {
              "type": "string",
              "description": "OAuth access token for NotebookLM Enterprise."
            }
          }
        },
        "codeDump.includeDependencyGraph": {
          "type": "boolean",
          "default": true,
          "description": "Include a dependency graph in JSON exports showing import/require relationships."
        }
      }
    }
  },
  "scripts": {
    "compile": "tsc -p ./",
    "watch": "tsc -watch -p ./",
    "test": "npm run compile && node --test dist/__tests__/*.test.js",
    "package": "vsce package",
    "publish": "vsce publish"
  },
  "keywords": [
    "export",
    "code",
    "txt",
    "md",
    "ai",
    "chatgpt",
    "claude",
    "archiving",
    "markdown",
    "tools",
    "context",
    "workspace",
    "explorer",
    "context menu",
    "vscode-extension",
    "preset",
    "smart-filter",
    "token-estimate"
  ],
  "devDependencies": {
    "@types/node": "^18.19.121",
    "@types/vscode": "^1.102.0",
    "typescript": "^5.9.2",
    "vsce": "^2.15.0"
  },
  "dependencies": {
    "pdf-lib": "^1.17.1",
    "ignore": "^5.3.2",
    "tslib": "^2.8.1",
    "@pdf-lib/standard-fonts": "^1.0.0",
    "pako": "^2.1.0"
  }
}
